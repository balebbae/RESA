
  __    _   ___  
 / /\  | | | |_) 
/_/--\ |_| |_| \_ v1.61.7, built with Go go1.23.1

watching .
!exclude bin
watching cmd
watching cmd/api
watching cmd/migrate
watching cmd/migrate/migrations
watching context
!exclude docs
watching internal
watching internal/auth
watching internal/db
watching internal/env
watching internal/mailer
watching internal/mailer/template
watching internal/ratelimiter
watching internal/store
watching internal/store/cache
watching tmp
> make gen-docs
2025/10/19 18:45:54 Generate swagger docs....
2025/10/19 18:45:54 Generate general API Info, search dir:cmd
2025/10/19 18:45:54 warning: failed to get package name in dir: cmd, error: execute go list command, exit status 1, stdout:, stderr:no Go files in /Users/baecal000/programming/RESA/backend/cmd
2025/10/19 18:45:54 Generate general API Info, search dir:internal
2025/10/19 18:45:54 warning: failed to get package name in dir: internal, error: execute go list command, exit status 1, stdout:, stderr:no Go files in /Users/baecal000/programming/RESA/backend/internal
2025/10/19 18:45:54 Generating main.RegisterUserPayload
2025/10/19 18:45:54 Generating main.UserWithToken
2025/10/19 18:45:54 Generating store.User
2025/10/19 18:45:54 Generating main.CreateUserTokenPayload
2025/10/19 18:45:54 Generating main.GoogleLoginResponse
2025/10/19 18:45:54 Generating main.GoogleCallbackPayload
2025/10/19 18:45:54 Generating store.Employee
2025/10/19 18:45:54 Generating main.CreateEmployeePayload
2025/10/19 18:45:54 Generating main.UpdateEmployeePayload
2025/10/19 18:45:54 Generating main.AddEmployeeRolesPayload
2025/10/19 18:45:54 Generating main.CreateRestaurantPayload
2025/10/19 18:45:54 Generating store.Restaurant
2025/10/19 18:45:54 Generating main.UpdateRestaurantPayload
2025/10/19 18:45:54 Generating store.Role
2025/10/19 18:45:54 Generating main.CreateRolePayload
2025/10/19 18:45:54 Generating main.UpdateRolePayload
2025/10/19 18:45:54 Generating store.ScheduledShift
2025/10/19 18:45:54 Generating main.createScheduledShiftRequest
2025/10/19 18:45:54 Generating main.updateScheduledShiftRequest
2025/10/19 18:45:54 Generating main.assignEmployeeRequest
2025/10/19 18:45:54 Generating store.Schedule
2025/10/19 18:45:54 Generating main.CreateSchedulePayload
2025/10/19 18:45:54 Generating main.UpdateSchedulePayload
2025/10/19 18:45:54 Generating store.ShiftTemplate
2025/10/19 18:45:54 Generating main.CreateShiftTemplatePayload
2025/10/19 18:45:54 Generating main.UpdateShiftTemplatePayload
2025/10/19 18:45:54 create docs.go at docs/docs.go
2025/10/19 18:45:54 create swagger.json at docs/swagger.json
2025/10/19 18:45:54 create swagger.yaml at docs/swagger.yaml
building...
# github.com/balebbae/RESA/internal/store
internal/store/mock.go:12:10: cannot use &MockUserStore{} (value of type *MockUserStore) as interface{Activate(context.Context, string) error; Create(context.Context, *sql.Tx, *User) error; CreateAndInvite(context.Context, *User, string, time.Duration) error; CreateUserWithGoogle(context.Context, *User, string, string) error; CreateWithGoogle(context.Context, *sql.Tx, *User, string, string) error; Delete(context.Context, int64) error; GetByEmail(context.Context, string) (*User, error); GetByEmailIncludingInactive(context.Context, string) (*User, error); GetByGoogleID(context.Context, string) (*User, error); GetByID(context.Context, int64) (*User, error); LinkGoogleAccount(context.Context, int64, string, string) error} value in struct literal: *MockUserStore does not implement interface{Activate(context.Context, string) error; Create(context.Context, *sql.Tx, *User) error; CreateAndInvite(context.Context, *User, string, time.Duration) error; CreateUserWithGoogle(context.Context, *User, string, string) error; CreateWithGoogle(context.Context, *sql.Tx, *User, string, string) error; Delete(context.Context, int64) error; GetByEmail(context.Context, string) (*User, error); GetByEmailIncludingInactive(context.Context, string) (*User, error); GetByGoogleID(context.Context, string) (*User, error); GetByID(context.Context, int64) (*User, error); LinkGoogleAccount(context.Context, int64, string, string) error} (missing method GetByEmailIncludingInactive)
failed to build, error: exit status 1
running...
{"level":"info","ts":1760924755.260418,"caller":"api/main.go:111","msg":"db connection established"}
{"level":"info","ts":1760924755.2621388,"caller":"api/main.go:117","msg":"redis connection established"}
{"level":"info","ts":1760924755.262154,"caller":"api/main.go:132","msg":"Redis cache enabled","addr":"localhost:6379","restaurants_nil":false}
{"level":"info","ts":1760924755.2624059,"caller":"api/api.go:270","msg":"server has started","addr":":8080","env":"production"}
2025/10/19 18:46:14 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000001] "OPTIONS http://localhost:8080/v1/authentication/google HTTP/1.1" from [::1]:56708 - 200 0B in 1.745125ms
{"level":"info","ts":1760924774.8996649,"caller":"api/auth.go:303","msg":"Google OAuth initiated","state":"47467f56-e6b2-481f-8a2e-352d2bfcd270"}
2025/10/19 18:46:14 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000002] "POST http://localhost:8080/v1/authentication/google HTTP/1.1" from [::1]:56708 - 200 495B in 8.45675ms
2025/10/19 18:46:19 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000003] "OPTIONS http://localhost:8080/v1/authentication/google/callback HTTP/1.1" from [::1]:56708 - 200 0B in 61.333µs
{"level":"info","ts":1760924779.606101,"caller":"api/auth.go:350","msg":"Google user info retrieved","email":"baecal000@gmail.com","google_id":"102872842518435479632"}
{"level":"info","ts":1760924779.6135192,"caller":"api/auth.go:350","msg":"Google user info retrieved","email":"baecal000@gmail.com","google_id":"102872842518435479632"}
{"level":"info","ts":1760924779.654297,"caller":"api/auth.go:356","msg":"Existing Google user logged in","user_id":24}
2025/10/19 18:46:19 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000005] "POST http://localhost:8080/v1/authentication/google/callback HTTP/1.1" from [::1]:56724 - 200 209B in 515.976833ms
{"level":"info","ts":1760924779.671218,"caller":"api/auth.go:356","msg":"Existing Google user logged in","user_id":24}
2025/10/19 18:46:19 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000004] "POST http://localhost:8080/v1/authentication/google/callback HTTP/1.1" from [::1]:56708 - 200 209B in 535.019458ms
2025/10/19 18:46:20 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000006] "OPTIONS http://localhost:8080/v1/restaurants HTTP/1.1" from [::1]:56724 - 200 0B in 23.166µs
2025/10/19 18:46:20 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000007] "OPTIONS http://localhost:8080/v1/restaurants HTTP/1.1" from [::1]:56708 - 200 0B in 8.583µs
2025/10/19 18:46:20 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000008] "GET http://localhost:8080/v1/restaurants HTTP/1.1" from [::1]:56708 - 200 370B in 37.863708ms
2025/10/19 18:46:20 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000009] "GET http://localhost:8080/v1/restaurants HTTP/1.1" from [::1]:56724 - 200 370B in 5.734083ms
2025/10/19 18:46:23 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000010] "OPTIONS http://localhost:8080/v1/restaurants/3 HTTP/1.1" from [::1]:56724 - 200 0B in 21.125µs
2025/10/19 18:46:23 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000011] "OPTIONS http://localhost:8080/v1/restaurants/3 HTTP/1.1" from [::1]:56708 - 200 0B in 8.125µs
Passes this condition
CACHE HIT
2025/10/19 18:46:23 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000012] "GET http://localhost:8080/v1/restaurants/3 HTTP/1.1" from [::1]:56708 - 200 184B in 4.699875ms
Passes this condition
CACHE HIT
2025/10/19 18:46:23 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000013] "GET http://localhost:8080/v1/restaurants/3 HTTP/1.1" from [::1]:56724 - 200 184B in 2.025459ms
2025/10/19 18:46:28 [Calebs-Air.attwifi.manager/zgUKzxqvfX-000014] "OPTIONS http://localhost:8080/v1/restaurants/3 HTTP/1.1" from [::1]:56724 - 200 0B in 16.834µs
cleaning...
see you again~
